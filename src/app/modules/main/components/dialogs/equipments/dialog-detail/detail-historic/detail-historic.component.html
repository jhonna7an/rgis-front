<div class="tab-historic-container">

  <mat-drawer-container class="example-container custom-drawer" autosize>
      <mat-drawer #drawer class="example-sidenav" mode="side" opened="true">
          <app-loading *ngIf="loading"></app-loading>

          <div class="side-table">
              <div>
                  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

                      <ng-container matColumnDef="date">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
                          <td mat-cell *matCellDef="let element"> {{element.modificationDate | date:'shortDate'}} </td>
                      </ng-container>

                      <ng-container matColumnDef="user">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>Usuario</th>
                          <td mat-cell *matCellDef="let element"> {{element.userView?.name}} {{element.userView?.lastName}} </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="getHistoricById(row)" class="historic-row"></tr>
                  </table>
              </div>

              <div>
                  <p>Cantidad de registros: {{historics?.length}}</p>
              </div>
          </div>
      </mat-drawer>

      <div class="historic-detail">
          <ng-container *ngIf="!showHistoricDetail">
              <p>{{historicMessage}}</p>
          </ng-container>
          <ng-container *ngIf="showHistoricDetail">
              <div class="detail">
                  <div class="row ml-0 mr-0">
                      <h3>Datos Técnicos</h3>
                      <div>
                          <div>
                              <p>Equipo:</p>
                              <span>{{historic?.equipment.model?.name.name}}</span>
                          </div>
                          <div>
                              <p>N° Serie:</p>
                              <span>{{historic?.equipment.serial}}</span>
                          </div>
                          <div>
                              <p>Modelo:</p>
                              <span>{{historic?.equipment.model?.model}}</span>
                          </div>
                          <div>
                              <p>Marca:</p>
                              <span>{{historic.equipment.model.brand.brand}}</span>
                          </div>
                      </div>
                  </div>
                  <div class="row ml-0 mr-0">
                      <h3>Estado</h3>
                      <div>
                          <div>
                              <p>Estado:</p>
                              <span>
                                  <button class="btn {{historic.state.state | lowercase | accent}}">{{historic?.state?.state}}</button>
                              </span>
                          </div>
                          <div>
                              <p>Valoración:</p>
                              <span>{{historic?.valoration?.valoration}}</span>
                          </div>
                      </div>
                  </div>
                  <div class="row ml-0 mr-0">
                      <h3>Distribución</h3>
                      <div>
                          <div>
                              <p>Distrito:</p>
                              <span>{{historic?.branchOffice?.district?.districtName}}</span>
                          </div>
                          <div>
                              <p>Ubicación:</p>
                              <span>{{historic?.location?.name}}</span>
                          </div>
                      </div>
                  </div>
                  <div class="row ml-0 mr-0">
                      <h3>Modificación</h3>
                      <div>
                          <div>
                              <p>Fecha:</p>
                              <span>{{historic.creationDate | date:'shortDate'}}</span>
                          </div>
                          <div>
                              <p>Hora:</p>
                              <span>{{historic.creationDate | date:'shortTime'}}</span>
                          </div>
                          <div>
                              <p>BadgeId:</p>
                              <span>{{historic.userView.badgeId}}</span>
                          </div>
                          <div>
                              <p>Nombre:</p>
                              <span>{{historic.userView.name}} {{historic.userView.lastName}}</span>
                          </div>
                      </div>
                  </div>
                  <div class="row ml-0 mr-0" style="background-color: #fff;">
                      <h3 style="margin-bottom: 5px;">Comentarios</h3>
                      <div>
                          <ul>
                              <li *ngFor="let comment of historic.comments">{{comment}}</li>
                          </ul>
                      </div>
                  </div>
              </div>
          </ng-container>

      </div>
  </mat-drawer-container>
</div>
